<div class="login-container">
  <div class="login-wrapper">
    <p-card>
      <ng-template pTemplate="header">
        <div class="login-header">
          <h2>SkoolCampus</h2>
          <p>Sign in to continue</p>
        </div>
      </ng-template>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        @if (errorMessage) {
          <p-message severity="error" [text]="errorMessage" styleClass="w-full mb-3"></p-message>
        }

        <div class="field">
          <label for="username">Username</label>
          <input
            pInputText
            id="username"
            formControlName="username"
            placeholder="Enter your username"
            class="w-full"
            [class.ng-invalid]="username?.invalid && username?.touched"
          />
          @if (username?.invalid && username?.touched) {
            <small class="p-error">
              @if (username?.errors?.['required']) {
                Username is required
              }
            </small>
          }
        </div>

        <div class="field">
          <label for="password">Password</label>
          <p-password
            formControlName="password"
            placeholder="Enter your password"
            [toggleMask]="true"
            [feedback]="false"
            styleClass="w-full"
            inputStyleClass="w-full"
            [class.ng-invalid]="password?.invalid && password?.touched"
          ></p-password>
          @if (password?.invalid && password?.touched) {
            <small class="p-error">
              @if (password?.errors?.['required']) {
                Password is required
              }
              @if (password?.errors?.['minlength']) {
                Password must be at least 4 characters
              }
            </small>
          }
        </div>

        <div class="forgot-password-link">
          <a routerLink="/auth/forgot-password">Forgot Password?</a>
        </div>

        <p-button
          type="submit"
          label="Sign In"
          [loading]="loading"
          styleClass="w-full"
          [disabled]="loading"
        ></p-button>
      </form>

      <ng-template pTemplate="footer">
        <div class="login-footer">
          <p>&copy; 2024 SkoolCampus. All rights reserved.</p>
        </div>
      </ng-template>
    </p-card>
  </div>
</div>
